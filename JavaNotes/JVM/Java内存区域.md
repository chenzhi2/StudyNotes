# Java内存区域

Java虚拟机在执行Java程序的过程中会把它所管理的内存划分为若干个不同的数据区域，包括以下几个运行时数据区。

- 程序计数器

  线程私有，是一块较小的内存空间，是当前线程执行的字节码的行号指示器。虚拟机的概念模型中，字节码解释器工作时就是通过改变这个计数器的取值来选取下一条要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。

- Java虚拟机栈

  线程私有，生命周期与线程相同。每个方法被执行的时候都会创建一个栈帧用于存储局部变量表、操作栈、动态链接、方法出口等信息。局部变量表存储了基本数据类型、对象引用类型

- 本地方法栈

  为虚拟机使用到的Native方法服务

- Java堆

  Java Heap是虚拟机所管理的内存中最大的一块，被所有线程共享，在虚拟机启动时创建。几乎所有的对象实例都在这里分配内存。

  Java堆是垃圾收集器管理的主要区域。

- 方法区

  各个线程共享，用于存储已被虚拟机加载的类信息、常量、静态变量、即使编译器编译后的代码等数据。

- 运行时常量池

  是方法区的一部分，用于存放编译器生成的各种字面量和符号引用，这部分内容将在类加载后存放到运行时常量池中。

  运行期间也可能将新的常量放入池中，运用较多的如String类的intern()方法。

- 直接内存

  既不是虚拟机运行时数据区的一部分也不是虚拟机规范中定义的内存区域，但这部分内存也被频繁的使用，而且也可能导致OutOfMemoryError异常出现。

  

  

  

  

  